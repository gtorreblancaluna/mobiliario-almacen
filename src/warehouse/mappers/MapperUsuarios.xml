<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="MapperUsuarios">
  
    <resultMap id="resultUsuario" type="common.model.Usuario">        
        <result property="usuarioId" column="id_usuarios"/>
        <result property="nombre" column="nombre"/>
        <result property="apellidos" column="apellidos"/>
        <result property="telMovil" column="tel_movil"/>        
        <result property="telFijo" column="tel_fijo"/>
        <result property="direccion" column="direccion"/>
        <result property="administrador" column="administrador"/>
        <result property="nivel1" column="nivel1"/>        
        <result property="nivel2" column="nivel2"/>
        <result property="contrasenia" column="contraseÃ±a"/>
        <result property="activo" column="activo"/>        
        <result property="puesto.puestoId" column="id_puesto"/>
        <result property="puesto.descripcion" column="descripcion"/>        
    </resultMap>
  
    <select id="getByPassword" resultMap="resultUsuario" parameterType="java.lang.String">
        SELECT u.*, p.id_puesto, p.descripcion        
        FROM usuarios u 
        INNER JOIN puesto p ON (p.id_puesto = u.id_puesto)
        WHERE contrasenia = #{password}
        AND activo = 1
    </select>
    
</mapper>